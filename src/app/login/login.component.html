<div class="parent">
  <div class="area">
    <ul class="circles">
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
    </ul>
  </div>
  <div
    class="container"
    [ngClass]="isFormCadastroVisible ? 'active' : ''"
    id="container">
    <div class="form-container sign-up">
      <form [formGroup]="cadastroForm">
        <div class="d-flex align-items-center mb-4">
          <img class="logo" src="assets/icons/iot.png" alt="" />
          <h5 class="ms-3 mb-0">Community IoT Device</h5>
        </div>
        <div class="form-floating w-100 my-3">
          <input
            type="text"
            name="name"
            class="form-control"
            formControlName="nome"
            placeholder="Nome"
            id="name"
            [ngClass]="{
              'is-invalid': isInputValid('nome', 'cadastroForm')
            }" />
          <label class="label-input" for="name">Nome</label>
          <div class="invalid-feedback">O campo nome é obrigatório!</div>
        </div>

        <div class="form-floating w-100 mb-3">
          <input
            class="form-control"
            type="email"
            name="email"
            [email]="true"
            formControlName="email"
            placeholder="Email"
            [ngClass]="{
              'is-invalid': isInputValid('email', 'cadastroForm')
            }" />
          <label class="label-input" for="name">Email</label>
          <div class="invalid-feedback">
            Campo email deve conter um endereço de email válido. Ex.:
            abc&#64;abc.com
          </div>
        </div>
        <div class="form-floating w-100 mb-3">
          <input
            class="form-control"
            type="password"
            name="password"
            formControlName="senha"
            placeholder="Senha"
            [ngClass]="{
              'is-invalid': isInputValid('senha', 'cadastroForm')
            }" />
          <label class="label-input" for="name">Senha</label>
          <div class="invalid-feedback">O campo senha é obrigatório!</div>
        </div>
        <button
          type="button"
          class="btn"
          (click)="onRegister()"
          [disabled]="cadastroForm.invalid">
          Criar conta
        </button>
      </form>
    </div>
    <div class="form-container sign-in">
      <form [formGroup]="loginForm">
        <div class="d-flex align-items-center mb-4">
          <img class="logo" src="assets/icons/iot.png" alt="" />
          <h5 class="ms-3 mb-0">Community IoT Device</h5>
        </div>
        <div class="form-floating w-100 mb-3">
          <input
            class="form-control"
            type="email"
            name="email"
            formControlName="email"
            placeholder="Email"
            [ngClass]="{
              'is-invalid': isInputValid('email', 'loginForm')
            }" />
          <label class="label-input" for="name">Email</label>
          <div class="invalid-feedback">O campo email é obrigatório!</div>
        </div>
        <div class="form-floating w-100 mb-3">
          <input
            class="form-control"
            type="password"
            name="password"
            formControlName="senha"
            placeholder="Senha"
            [ngClass]="{
              'is-invalid': isInputValid('senha', 'loginForm')
            }" />
          <label class="label-input" for="name">Senha</label>
          <div class="invalid-feedback">O campo senha é obrigatório!</div>
        </div>
        <a href="#">→Esqueceu a senha? ←</a>
        <button class="btn" (click)="onLogin()" [disabled]="loginForm.invalid">
          Entrar
        </button>
      </form>
    </div>
    <div class="toggle-container">
      <div class="toggle">
        <div class="toggle-panel toggle-left">
          <h1 class="m-0">CIoTD</h1>
          <p>
            Sua plataforma colaborativa para compartilhamento de acesso à dados
            de dispositivos IoT.
          </p>
          <button
            type="button"
            class="btn hidden"
            id="login"
            (click)="showCadastroForm()">
            Entrar
          </button>
        </div>
        <div class="toggle-panel toggle-right">
          <h1 class="m-0">CIoTD</h1>
          <p>
            Sua plataforma colaborativa para compartilhamento de acesso à dados
            de dispositivos IoT.
          </p>
          <button
            type="button"
            class="btn hidden"
            id="register"
            (click)="showCadastroForm()">
            Criar Conta
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

@if (modalConfirmacao()) {
  <app-confirmacao-envio
    [open]="modalConfirmacao()"
    [mensagem]="mensagemModalConfirmacao"
    [tipoModal]="tipoModalConfirmacao"
    (fecharModal)="modalConfirmacao.set($event)">
  </app-confirmacao-envio>
}
